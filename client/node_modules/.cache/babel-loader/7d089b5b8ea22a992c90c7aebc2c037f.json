{"ast":null,"code":"var _jsxFileName = \"/Users/bijitashyabirinchi/Documents/Macs/5410/Project/csci5410_group30/client/src/auth/Login.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { login } from \"../actions/auth\";\nimport { useDispatch } from \"react-redux\";\nimport { CognitoUserPool, CognitoUserAttribute, CognitoUser, AuthenticationDetails } from \"amazon-cognito-identity-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Login = _ref => {\n  _s();\n\n  let {\n    history\n  } = _ref;\n  const dispatch = useDispatch();\n  var poolData = {\n    UserPoolId: \"us-east-1_rIytU64lO\",\n    ClientId: \"6qbs04aqbt3htai8l8pikfbivl\"\n  };\n  const userPool = new CognitoUserPool(poolData);\n  const [email, setEmail] = useState(\"bijit12cse@gmail.com\");\n  const [emailerror, setEmailerror] = useState();\n  const [password, setPassword] = useState(\"Bijit@1994\");\n\n  const validatEmail = value => {\n    const regexforemail = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n\n    if (regexforemail.test(value)) {\n      setEmail(value);\n      setEmailerror(null);\n    } else {\n      setEmail(value);\n      setEmailerror(\"Enter valid Email Address\");\n    }\n  };\n\n  const handleSubmit = event => {\n    if (emailerror) {\n      return;\n    } else {\n      const cognitoUser = new CognitoUser({\n        Username: email,\n        Pool: userPool\n      });\n      const authenticationDetails = new AuthenticationDetails({\n        Username: email,\n        Password: password\n      });\n      event.preventDefault();\n      cognitoUser.authenticateUser(authenticationDetails, {\n        onSuccess: function (result) {\n          console.log(result.idToken.payload);\n          console.log(result);\n          var response = result.idToken.payload;\n          var userid = response[\"custom:userid\"];\n          var cognitousername = response[\"cognito:username\"];\n          console.log(\"userid: \" + userid);\n          console.log(\"token: \" + result.getIdToken().getJwtToken());\n          console.log(\"cognitousername: \" + cognitousername);\n          localStorage.setItem(\"jwttoken\", result.getIdToken().getJwtToken());\n          localStorage.setItem(\"email\", result.idToken.payload.email);\n          localStorage.setItem(\"userid\", userid);\n          localStorage.setItem(\"cognitousername\", cognitousername);\n          console.log(\"LoggedIn\");\n          dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload: result\n          });\n          history.push(\"/securityquestion\");\n        },\n        onFailure: function (err) {\n          console.log(err.message);\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid bg-secondary p-5 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6 offset-md-3\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            className: \"mt-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Email address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                className: \"form-control\",\n                placeholder: \"Enter email\",\n                value: email,\n                onChange: event => validatEmail(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this), emailerror && /*#__PURE__*/_jsxDEV(\"p\", {\n              children: emailerror\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 30\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"form-label\",\n                children: \"Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 106,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                className: \"form-control\",\n                placeholder: \"Enter password\",\n                value: password,\n                onChange: event => setPassword(event.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              disabled: !email || !password,\n              className: \"btn btn-primary\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Login, \"ey0x5yJHODXBwfo2a4X+X3yW8nA=\", false, function () {\n  return [useDispatch];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["useState","toast","login","useDispatch","CognitoUserPool","CognitoUserAttribute","CognitoUser","AuthenticationDetails","Login","history","dispatch","poolData","UserPoolId","ClientId","userPool","email","setEmail","emailerror","setEmailerror","password","setPassword","validatEmail","value","regexforemail","test","handleSubmit","event","cognitoUser","Username","Pool","authenticationDetails","Password","preventDefault","authenticateUser","onSuccess","result","console","log","idToken","payload","response","userid","cognitousername","getIdToken","getJwtToken","localStorage","setItem","type","push","onFailure","err","message","target"],"sources":["/Users/bijitashyabirinchi/Documents/Macs/5410/Project/csci5410_group30/client/src/auth/Login.js"],"sourcesContent":["import { useState } from \"react\";\nimport { toast } from \"react-toastify\";\nimport { login } from \"../actions/auth\";\n\nimport { useDispatch } from \"react-redux\";\nimport {\n  CognitoUserPool,\n  CognitoUserAttribute,\n  CognitoUser,\n  AuthenticationDetails,\n} from \"amazon-cognito-identity-js\";\n\nconst Login = ({ history }) => {\n  const dispatch = useDispatch();\n\n  var poolData = {\n    UserPoolId: \"us-east-1_rIytU64lO\",\n    ClientId: \"6qbs04aqbt3htai8l8pikfbivl\",\n  };\n\n  const userPool = new CognitoUserPool(poolData);\n\n  const [email, setEmail] = useState(\"bijit12cse@gmail.com\");\n  const [emailerror, setEmailerror] = useState();\n  const [password, setPassword] = useState(\"Bijit@1994\");\n\n  const validatEmail = (value) => {\n    const regexforemail =\n      /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/;\n    if (regexforemail.test(value)) {\n      setEmail(value);\n      setEmailerror(null);\n    } else {\n      setEmail(value);\n      setEmailerror(\"Enter valid Email Address\");\n    }\n  };\n\n  const handleSubmit = (event) => {\n    if (emailerror) {\n      return;\n    } else {\n      const cognitoUser = new CognitoUser({ Username: email, Pool: userPool });\n      const authenticationDetails = new AuthenticationDetails({\n        Username: email,\n        Password: password,\n      });\n\n      event.preventDefault();\n\n      cognitoUser.authenticateUser(authenticationDetails, {\n        onSuccess: function (result) {\n          console.log(result.idToken.payload);\n          console.log(result);\n          var response = result.idToken.payload;\n          var userid = response[\"custom:userid\"];\n          var cognitousername = response[\"cognito:username\"];\n\n          console.log(\"userid: \" + userid);\n          console.log(\"token: \" + result.getIdToken().getJwtToken());\n          console.log(\"cognitousername: \" + cognitousername);\n\n          localStorage.setItem(\"jwttoken\", result.getIdToken().getJwtToken());\n          localStorage.setItem(\"email\", result.idToken.payload.email);\n          localStorage.setItem(\"userid\", userid);\n          localStorage.setItem(\"cognitousername\", cognitousername);\n\n          console.log(\"LoggedIn\");\n          dispatch({\n            type: \"LOGGED_IN_USER\",\n            payload: result,\n          });\n          history.push(\"/securityquestion\");\n        },\n        onFailure: function (err) {\n          console.log(err.message);\n        },\n      });\n    }\n  };\n\n  return (\n    <>\n      <div className=\"container-fluid bg-secondary p-5 text-center\">\n        <h1>Login</h1>\n      </div>\n\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-6 offset-md-3\">\n            <form onSubmit={handleSubmit} className=\"mt-3\">\n              <div className=\"form-group mb-3\">\n                <label className=\"form-label\">Email address</label>\n                <input\n                  type=\"email\"\n                  className=\"form-control\"\n                  placeholder=\"Enter email\"\n                  value={email}\n                  onChange={(event) => validatEmail(event.target.value)}\n                />\n              </div>\n              {emailerror && <p>{emailerror}</p>}\n              <br />\n\n              <div className=\"form-group mb-3\">\n                <label className=\"form-label\">Password</label>\n                <input\n                  type=\"password\"\n                  className=\"form-control\"\n                  placeholder=\"Enter password\"\n                  value={password}\n                  onChange={(event) => setPassword(event.target.value)}\n                />\n              </div>\n              <br />\n\n              <button\n                disabled={!email || !password}\n                className=\"btn btn-primary\"\n              >\n                Submit\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}