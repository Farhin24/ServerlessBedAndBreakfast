{"ast":null,"code":"var _jsxFileName = \"/Users/bijitashyabirinchi/Documents/Macs/5410/Project/csci5410_group30/client/src/hotels/ViewHotel.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useStore } from \"react-redux\";\nimport { hotelById, diffDays, isAlreadyBooked } from \"../actions/hotel\";\nimport moment from \"moment\";\nimport { useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ViewHotel = _ref => {\n  _s();\n\n  let {\n    match,\n    history\n  } = _ref;\n  const [hotel, setHotel] = useState({}); // const [image, setImage] = useState(\"\");\n\n  const [loading, setLoading] = useState(false);\n  const [alreadyBooked, setAlreadyBooked] = useState(false);\n  const {\n    auth\n  } = useSelector(state => ({ ...state\n  }));\n  useEffect(() => {\n    loadHotel();\n  }, []); // useEffect(() => {\n  //   if (auth && auth.token) {\n  //     isAlreadyBooked(auth.token, match.params.hotelId).then((res) => {\n  //       // console.log(res);\n  //       if (res.data.ok) setAlreadyBooked(true);\n  //     });\n  //   }\n  // }, []);\n\n  const loadHotel = async () => {\n    let res = await hotelById(match.params.hotelId);\n    setHotel(res.data.body);\n  };\n\n  const handleClick = async e => {\n    e.preventDefault();\n\n    if (!auth || !auth.idToken) {\n      history.push(\"/login\");\n      return;\n    }\n\n    setLoading(true);\n    if (!auth) history.push(\"/login\"); // console.log(auth.token, match.params.hotelId);\n    // let res = await getSessionId(auth.token, match.params.hotelId);\n    // console.log(\"get sessionid resposne\", res.data.sessionId);\n    // const stripe = await loadStripe(process.env.REACT_APP_STRIPE_KEY);\n    // stripe\n    //   .redirectToCheckout({\n    //     sessionId: res.data.sessionId,\n    //   })\n    //   .then((result) => console.log(result));\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid bg-secondary p-5 text-center\",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: hotel.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: hotel.image,\n            alt: hotel.title,\n            className: \"img img-fluid m-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-md-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"b\", {\n            children: hotel.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"alert alert-info mt-3\",\n            style: {\n              maxWidth: \"200px\",\n              textAlign: \"center\"\n            },\n            children: [\"$\", hotel.dailyRate]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"card-text\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"float-right text-primary\",\n              children: [\"for \", diffDays(hotel.from, hotel.to), \" \", diffDays(hotel.from, hotel.to) <= 1 ? \" day\" : \" days\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"From \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 20\n            }, this), \" \", moment(new Date(hotel.from)).format(\"MMMM Do YYYY, h:mm:ss a\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"To \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 18\n            }, this), \" \", moment(new Date(hotel.to)).format(\"MMMM Do YYYY, h:mm:ss a\")]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleClick,\n            className: \"btn btn-block btn-lg btn-primary mt-3\",\n            disabled: loading || !auth,\n            children: loading ? \"Loading...\" : // : alreadyBooked\n            // ? \"Already Booked\"\n            auth && auth.idToken ? \"Book Now\" : \"Login to Book\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ViewHotel, \"jZiSFBXtICdIshYhz+gm3xy9/yA=\", false, function () {\n  return [useSelector];\n});\n\n_c = ViewHotel;\nexport default ViewHotel;\n\nvar _c;\n\n$RefreshReg$(_c, \"ViewHotel\");","map":{"version":3,"names":["React","useState","useEffect","useStore","hotelById","diffDays","isAlreadyBooked","moment","useSelector","ViewHotel","match","history","hotel","setHotel","loading","setLoading","alreadyBooked","setAlreadyBooked","auth","state","loadHotel","res","params","hotelId","data","body","handleClick","e","preventDefault","idToken","push","title","image","description","maxWidth","textAlign","dailyRate","from","to","Date","format"],"sources":["/Users/bijitashyabirinchi/Documents/Macs/5410/Project/csci5410_group30/client/src/hotels/ViewHotel.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useStore } from \"react-redux\";\nimport { hotelById, diffDays, isAlreadyBooked } from \"../actions/hotel\";\nimport moment from \"moment\";\nimport { useSelector } from \"react-redux\";\n\nconst ViewHotel = ({ match, history }) => {\n  const [hotel, setHotel] = useState({});\n  // const [image, setImage] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [alreadyBooked, setAlreadyBooked] = useState(false);\n\n  const { auth } = useSelector((state) => ({ ...state }));\n\n  useEffect(() => {\n    loadHotel();\n  }, []);\n\n  // useEffect(() => {\n  //   if (auth && auth.token) {\n  //     isAlreadyBooked(auth.token, match.params.hotelId).then((res) => {\n  //       // console.log(res);\n  //       if (res.data.ok) setAlreadyBooked(true);\n  //     });\n  //   }\n  // }, []);\n\n  const loadHotel = async () => {\n    let res = await hotelById(match.params.hotelId);\n    setHotel(res.data.body);\n  };\n\n  const handleClick = async (e) => {\n    e.preventDefault();\n\n    if (!auth || !auth.idToken) {\n      history.push(\"/login\");\n      return;\n    }\n\n    setLoading(true);\n    if (!auth) history.push(\"/login\");\n    // console.log(auth.token, match.params.hotelId);\n    // let res = await getSessionId(auth.token, match.params.hotelId);\n    // console.log(\"get sessionid resposne\", res.data.sessionId);\n    // const stripe = await loadStripe(process.env.REACT_APP_STRIPE_KEY);\n    // stripe\n    //   .redirectToCheckout({\n    //     sessionId: res.data.sessionId,\n    //   })\n    //   .then((result) => console.log(result));\n  };\n\n  return (\n    <>\n      <div className=\"container-fluid bg-secondary p-5 text-center\">\n        <h1>{hotel.title}</h1>\n      </div>\n      <div className=\"container-fluid\">\n        <div className=\"row\">\n          <div className=\"col-md-6\">\n            <br />\n            <img\n              src={hotel.image}\n              alt={hotel.title}\n              className=\"img img-fluid m-2\"\n            />\n          </div>\n\n          <div className=\"col-md-6\">\n            <br />\n            <b>{hotel.description}</b>\n            <p\n              className=\"alert alert-info mt-3\"\n              style={{ maxWidth: \"200px\", textAlign: \"center\" }}\n            >\n              ${hotel.dailyRate}\n            </p>\n            <p className=\"card-text\">\n              <span className=\"float-right text-primary\">\n                for {diffDays(hotel.from, hotel.to)}{\" \"}\n                {diffDays(hotel.from, hotel.to) <= 1 ? \" day\" : \" days\"}\n              </span>\n            </p>\n            <p>\n              From <br />{\" \"}\n              {moment(new Date(hotel.from)).format(\"MMMM Do YYYY, h:mm:ss a\")}\n            </p>\n            <p>\n              To <br />{\" \"}\n              {moment(new Date(hotel.to)).format(\"MMMM Do YYYY, h:mm:ss a\")}\n            </p>\n            {/* <i>Posted by {hotel.postedBy && hotel.postedBy.name}</i> */}\n            <br />\n            <button\n              onClick={handleClick}\n              className=\"btn btn-block btn-lg btn-primary mt-3\"\n              disabled={loading || !auth}\n            >\n              {loading\n                ? \"Loading...\"\n                : // : alreadyBooked\n                // ? \"Already Booked\"\n                auth && auth.idToken\n                ? \"Book Now\"\n                : \"Login to Book\"}\n            </button>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ViewHotel;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}