{"ast":null,"code":"/**\n * Created by Samuel on 6/4/2016.\n * Simple wrapper functions to produce shorter UUIDs for cookies, maybe everything?\n */\nconst {\n  v4: uuidv4\n} = require('uuid');\n\nconst anyBase = require('any-base');\n\nconst flickrBase58 = '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ';\nconst cookieBase90 = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&'()*+-./:<=>?@[]^_`{|}~\";\nconst baseOptions = {\n  consistentLength: true\n}; // A default generator, instantiated only if used.\n\nlet toFlickr;\n/**\n * Takes a UUID, strips the dashes, and translates.\n * @param {string} longId\n * @param {function(string)} translator\n * @param {Object} [paddingParams]\n * @returns {string}\n */\n\nconst shortenUUID = (longId, translator, paddingParams) => {\n  const translated = translator(longId.toLowerCase().replace(/-/g, ''));\n  if (!paddingParams || !paddingParams.consistentLength) return translated;\n  return translated.padStart(paddingParams.shortIdLength, paddingParams.paddingChar);\n};\n/**\n * Translate back to hex and turn back into UUID format, with dashes\n * @param {string} shortId\n * @param {function(string)} translator\n * @returns {string}\n */\n\n\nconst enlargeUUID = (shortId, translator) => {\n  const uu1 = translator(shortId).padStart(32, '0'); // Join the zero padding and the UUID and then slice it up with match\n\n  const m = uu1.match(/(\\w{8})(\\w{4})(\\w{4})(\\w{4})(\\w{12})/); // Accumulate the matches and join them.\n\n  return [m[1], m[2], m[3], m[4], m[5]].join('-');\n}; // Calculate length for the shortened ID\n\n\nconst getShortIdLength = alphabetLength => Math.ceil(Math.log(2 ** 128) / Math.log(alphabetLength));\n\nmodule.exports = (() => {\n  /**\n   * @param {string} toAlphabet - Defaults to flickrBase58 if not provided\n   * @param {Object} [options]\n   *\n   * @returns {{new: (function()),\n   *  uuid: (function()),\n   *  fromUUID: (function(string)),\n   *  toUUID: (function(string)),\n   *  alphabet: (string)}}\n   */\n  const makeConvertor = (toAlphabet, options) => {\n    // Default to Flickr 58\n    const useAlphabet = toAlphabet || flickrBase58; // Default to baseOptions\n\n    const selectedOptions = { ...baseOptions,\n      ...options\n    }; // Check alphabet for duplicate entries\n\n    if ([...new Set(Array.from(useAlphabet))].length !== useAlphabet.length) {\n      throw new Error('The provided Alphabet has duplicate characters resulting in unreliable results');\n    }\n\n    const shortIdLength = getShortIdLength(useAlphabet.length); // Padding Params\n\n    const paddingParams = {\n      shortIdLength,\n      consistentLength: selectedOptions.consistentLength,\n      paddingChar: useAlphabet[0]\n    }; // UUIDs are in hex, so we translate to and from.\n\n    const fromHex = anyBase(anyBase.HEX, useAlphabet);\n    const toHex = anyBase(useAlphabet, anyBase.HEX);\n\n    const generate = () => shortenUUID(uuidv4(), fromHex, paddingParams);\n\n    const translator = {\n      new: generate,\n      generate,\n      uuid: uuidv4,\n      fromUUID: uuid => shortenUUID(uuid, fromHex, paddingParams),\n      toUUID: shortUuid => enlargeUUID(shortUuid, toHex),\n      alphabet: useAlphabet,\n      maxLength: shortIdLength\n    };\n    Object.freeze(translator);\n    return translator;\n  }; // Expose the constants for other purposes.\n\n\n  makeConvertor.constants = {\n    flickrBase58,\n    cookieBase90\n  }; // Expose the generic v4 UUID generator for convenience\n\n  makeConvertor.uuid = uuidv4; // Provide a generic generator\n\n  makeConvertor.generate = () => {\n    if (!toFlickr) {\n      // Generate on first use;\n      toFlickr = makeConvertor(flickrBase58).generate;\n    }\n\n    return toFlickr();\n  };\n\n  return makeConvertor;\n})();","map":{"version":3,"names":["v4","uuidv4","require","anyBase","flickrBase58","cookieBase90","baseOptions","consistentLength","toFlickr","shortenUUID","longId","translator","paddingParams","translated","toLowerCase","replace","padStart","shortIdLength","paddingChar","enlargeUUID","shortId","uu1","m","match","join","getShortIdLength","alphabetLength","Math","ceil","log","module","exports","makeConvertor","toAlphabet","options","useAlphabet","selectedOptions","Set","Array","from","length","Error","fromHex","HEX","toHex","generate","new","uuid","fromUUID","toUUID","shortUuid","alphabet","maxLength","Object","freeze","constants"],"sources":["/Users/bijitashyabirinchi/Documents/Macs/5410/Project/csci5410_group30/client/node_modules/short-uuid/index.js"],"sourcesContent":["/**\n * Created by Samuel on 6/4/2016.\n * Simple wrapper functions to produce shorter UUIDs for cookies, maybe everything?\n */\n\nconst { v4: uuidv4 } = require('uuid');\nconst anyBase = require('any-base');\n\nconst flickrBase58 = '123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ';\nconst cookieBase90 = \"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&'()*+-./:<=>?@[]^_`{|}~\";\n\nconst baseOptions = {\n  consistentLength: true,\n};\n\n// A default generator, instantiated only if used.\nlet toFlickr;\n\n/**\n * Takes a UUID, strips the dashes, and translates.\n * @param {string} longId\n * @param {function(string)} translator\n * @param {Object} [paddingParams]\n * @returns {string}\n */\nconst shortenUUID = (longId, translator, paddingParams) => {\n  const translated = translator(longId.toLowerCase().replace(/-/g, ''));\n\n  if (!paddingParams || !paddingParams.consistentLength) return translated;\n\n  return translated.padStart(\n    paddingParams.shortIdLength,\n    paddingParams.paddingChar,\n  );\n};\n\n/**\n * Translate back to hex and turn back into UUID format, with dashes\n * @param {string} shortId\n * @param {function(string)} translator\n * @returns {string}\n */\nconst enlargeUUID = (shortId, translator) => {\n  const uu1 = translator(shortId).padStart(32, '0');\n\n  // Join the zero padding and the UUID and then slice it up with match\n  const m = uu1.match(/(\\w{8})(\\w{4})(\\w{4})(\\w{4})(\\w{12})/);\n\n  // Accumulate the matches and join them.\n  return [m[1], m[2], m[3], m[4], m[5]].join('-');\n};\n\n// Calculate length for the shortened ID\nconst getShortIdLength = (alphabetLength) => (\n  Math.ceil(Math.log(2 ** 128) / Math.log(alphabetLength)));\n\nmodule.exports = (() => {\n  /**\n   * @param {string} toAlphabet - Defaults to flickrBase58 if not provided\n   * @param {Object} [options]\n   *\n   * @returns {{new: (function()),\n   *  uuid: (function()),\n   *  fromUUID: (function(string)),\n   *  toUUID: (function(string)),\n   *  alphabet: (string)}}\n   */\n  const makeConvertor = (toAlphabet, options) => {\n    // Default to Flickr 58\n    const useAlphabet = toAlphabet || flickrBase58;\n\n    // Default to baseOptions\n    const selectedOptions = { ...baseOptions, ...options };\n\n    // Check alphabet for duplicate entries\n    if ([...new Set(Array.from(useAlphabet))].length !== useAlphabet.length) {\n      throw new Error('The provided Alphabet has duplicate characters resulting in unreliable results');\n    }\n\n    const shortIdLength = getShortIdLength(useAlphabet.length);\n\n    // Padding Params\n    const paddingParams = {\n      shortIdLength,\n      consistentLength: selectedOptions.consistentLength,\n      paddingChar: useAlphabet[0],\n    };\n\n    // UUIDs are in hex, so we translate to and from.\n    const fromHex = anyBase(anyBase.HEX, useAlphabet);\n    const toHex = anyBase(useAlphabet, anyBase.HEX);\n    const generate = () => shortenUUID(uuidv4(), fromHex, paddingParams);\n\n    const translator = {\n      new: generate,\n      generate,\n      uuid: uuidv4,\n      fromUUID: (uuid) => shortenUUID(uuid, fromHex, paddingParams),\n      toUUID: (shortUuid) => enlargeUUID(shortUuid, toHex),\n      alphabet: useAlphabet,\n      maxLength: shortIdLength,\n    };\n\n    Object.freeze(translator);\n\n    return translator;\n  };\n\n  // Expose the constants for other purposes.\n  makeConvertor.constants = {\n    flickrBase58,\n    cookieBase90,\n  };\n\n  // Expose the generic v4 UUID generator for convenience\n  makeConvertor.uuid = uuidv4;\n\n  // Provide a generic generator\n  makeConvertor.generate = () => {\n    if (!toFlickr) {\n      // Generate on first use;\n      toFlickr = makeConvertor(flickrBase58).generate;\n    }\n    return toFlickr();\n  };\n\n  return makeConvertor;\n})();\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}